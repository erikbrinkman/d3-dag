<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>d3-dag</title><meta name="description" content="Documentation for d3-dag"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">d3-dag</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> d3-dag</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#d3-dag" id="d3-dag" style="color: inherit; text-decoration: none;">
  <h1>d3-dag</h1>
</a>
<p><a href="https://www.npmjs.com/package/d3-dag"><img src="https://img.shields.io/npm/v/d3-dag.svg" alt="npm"></a>
<a href="https://github.com/erikbrinkman/d3-dag/actions"><img src="https://github.com/erikbrinkman/d3-dag/workflows/build/badge.svg" alt="build"></a>
<a href="https://erikbrinkman.github.io/d3-dag/"><img src="https://img.shields.io/badge/docs-docs-informational" alt="docs"></a></p>
<p>Often data sets are hierarchical, but are not in a tree structure, such as genetic data.
In these instances <code>d3-hierarchy</code> may not suit your needs, which is why <code>d3-dag</code> (Directed Acyclic Graph) exists.
This module implements a data structure for manipulating DAGs.
Old versions were designed to mimic <code>d3-hierarchy</code>&#39;s api as much as possible, newer versions have opted to use modern javascript conventions while breaking from the standard set by d3.</p>

<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
  <h2>Examples</h2>
</a>
<ul>
<li><a href="https://beta.observablehq.com/@erikbrinkman/d3-dag-sugiyama">Observable with Sugiyama Layout</a> - Allows you to experiment with different layouts and different datasets for the sugiyama layout to understand the effects of different options.</li>
<li><a href="https://beta.observablehq.com/@erikbrinkman/d3-dag-topological">Observable with Topological Layouts</a> - Allows you to experiment with different layouts and different datasets for topological layouts.</li>
<li><a href="https://codepen.io/brinkbot/pen/oNZJXqK">Codepen with Sugiyama Layout</a> - For people who want a straight javascript example without the Observable fanciness.</li>
<li><a href="https://github.com/BenPortner/js_family_tree">Expandable Family Tree</a> - An expandable family tree rendered using d3-dag.</li>
</ul>

<a href="#installing" id="installing" style="color: inherit; text-decoration: none;">
  <h2>Installing</h2>
</a>
<p>If you use node, <code>npm i d3-dag</code> or <code>yarn add d3-dag</code>.
Otherwise you can load it using <code>unpkg</code>:</p>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-2"> </span><span class="hl-3">src</span><span class="hl-2">=</span><span class="hl-4">&quot;https://unpkg.com/d3-dag@0.11.1&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">dag</span><span class="hl-2"> </span><span class="hl-7">=</span><span class="hl-2"> </span><span class="hl-8">d3</span><span class="hl-2">.</span><span class="hl-9">dagStratify</span><span class="hl-2">(</span><span class="hl-7">...</span><span class="hl-2">);</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">layout</span><span class="hl-2"> </span><span class="hl-7">=</span><span class="hl-2"> </span><span class="hl-8">d3</span><span class="hl-2">.</span><span class="hl-9">sugiyama</span><span class="hl-2">();</span><br/><span class="hl-9">layout</span><span class="hl-2">(</span><span class="hl-8">dag</span><span class="hl-2">);</span><br/><span class="hl-10">// ... render dag</span><br/><span class="hl-0">&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span>
</code></pre>

<a href="#api-reference" id="api-reference" style="color: inherit; text-decoration: none;">
  <h2>API Reference</h2>
</a>
<ul>
<li><a href="https://erikbrinkman.github.io/d3-dag/modules/index.html">Javascript API</a> - methods exported to flat javascript</li>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/dag.Dag.html">DAG</a> - documentation on the DAG structure</li>
<li>Creating DAGs from data<ul>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/dag_create.HierarchyOperator.html">Hierarchy</a> - data in dag format</li>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/dag_create.StratifyOperator.html">Stratify</a> - data in tabular format</li>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/dag_create.ConnectOperator.html">Connect</a> - data in edge format</li>
</ul>
</li>
<li>Layout algorithms<ul>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/sugiyama.SugiyamaOperator.html">Sugiyama</a> - standard layout</li>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/zherebko.ZherebkoOperator.html">Zherebko</a> - topological layout</li>
<li><a href="https://erikbrinkman.github.io/d3-dag/interfaces/grid.GridOperator.html">Grid</a> - grid based topological layout</li>
</ul>
</li>
</ul>

<a href="#general-usage-notes" id="general-usage-notes" style="color: inherit; text-decoration: none;">
  <h2>General Usage Notes</h2>
</a>
<p>This library is built around the concept of operators.
Operators are functions with a fluent interface to modify their behavior.
Every function that modifies behavior returns a copy, and will not modify the original operator.
For example, the <code>stratify</code> operator creates dags from id-based parent data, can be used like so:</p>
<pre><code class="language-ts"><span class="hl-10">// note initial function call with no arguments to create default operator</span><br/><span class="hl-5">const</span><span class="hl-7"> </span><span class="hl-6">stratify</span><span class="hl-7"> = </span><span class="hl-9">dagStratify</span><span class="hl-7">();</span><br/><span class="hl-5">const</span><span class="hl-7"> </span><span class="hl-6">dag</span><span class="hl-7"> = </span><span class="hl-9">stratify</span><span class="hl-7">([{ </span><span class="hl-8">id:</span><span class="hl-7"> </span><span class="hl-11">&quot;parent&quot;</span><span class="hl-7"> }, { </span><span class="hl-8">id:</span><span class="hl-7"> </span><span class="hl-11">&quot;child&quot;</span><span class="hl-7">, </span><span class="hl-8">parentIds:</span><span class="hl-7"> [</span><span class="hl-11">&quot;parent&quot;</span><span class="hl-7">] }]);</span><br/><br/><span class="hl-8">stratify</span><span class="hl-7">.</span><span class="hl-9">id</span><span class="hl-7">(({ </span><span class="hl-8">myid</span><span class="hl-7"> }: { </span><span class="hl-8">myid</span><span class="hl-7">: </span><span class="hl-12">string</span><span class="hl-7"> }) </span><span class="hl-5">=&gt;</span><span class="hl-7"> </span><span class="hl-8">myid</span><span class="hl-7">);</span><br/><span class="hl-10">// doesn&#39;t work, stratify was not modified</span><br/><span class="hl-5">const</span><span class="hl-7"> </span><span class="hl-6">dag</span><span class="hl-7"> = </span><span class="hl-9">stratify</span><span class="hl-7">([{ </span><span class="hl-8">myid:</span><span class="hl-7"> </span><span class="hl-11">&quot;parent&quot;</span><span class="hl-7"> }, { </span><span class="hl-8">myid:</span><span class="hl-7"> </span><span class="hl-11">&quot;child&quot;</span><span class="hl-7">, </span><span class="hl-8">parentIds:</span><span class="hl-7"> [</span><span class="hl-11">&quot;parent&quot;</span><span class="hl-7">] }]);</span><br/><br/><span class="hl-5">const</span><span class="hl-7"> </span><span class="hl-6">myStratify</span><span class="hl-7"> = </span><span class="hl-8">stratify</span><span class="hl-7">.</span><span class="hl-9">id</span><span class="hl-7">(({ </span><span class="hl-8">myid</span><span class="hl-7"> }: { </span><span class="hl-8">myid</span><span class="hl-7">: </span><span class="hl-12">string</span><span class="hl-7"> }) </span><span class="hl-5">=&gt;</span><span class="hl-7"> </span><span class="hl-8">myid</span><span class="hl-7">);</span><br/><span class="hl-10">// works!</span><br/><span class="hl-5">const</span><span class="hl-7"> </span><span class="hl-6">dag</span><span class="hl-7"> = </span><span class="hl-9">myStratify</span><span class="hl-7">([{ </span><span class="hl-8">myid:</span><span class="hl-7"> </span><span class="hl-11">&quot;parent&quot;</span><span class="hl-7"> }, { </span><span class="hl-8">myid:</span><span class="hl-7"> </span><span class="hl-11">&quot;child&quot;</span><span class="hl-7">, </span><span class="hl-8">parentIds:</span><span class="hl-7"> [</span><span class="hl-11">&quot;parent&quot;</span><span class="hl-7">] }]);</span>
</code></pre>

<a href="#node-sizes" id="node-sizes" style="color: inherit; text-decoration: none;">
  <h3>Node Sizes</h3>
</a>
<p>It can be useful to set a custom node size for the layout.
There is an important detail to node sizes that can be easy to miss, namely that &quot;dummy nodes&quot; or nodes that represent part of a long edge also have a custom size.
If setting <code>sugiyama</code>&#39;s <code>nodeSize</code> accessor, make sure to handle the case when the node being sized is <code>undefined</code> if you want to mimic the default behavior but with custom sizes you probably want to use something like <code>.nodeSize(node =&gt; node === undefined ? [0, 0] : &lt;my node size&gt;)</code>.
To get even more flexible layouts, check <code>sugiNodeSize</code>.</p>

<a href="#typescript-notes" id="typescript-notes" style="color: inherit; text-decoration: none;">
  <h3>Typescript Notes</h3>
</a>
<ul>
<li>Default operators will expect the necessary types for them to work, but will also do runtime checks in case javascript users use them inappropriately.</li>
<li>Due to what seems like a bug in typescript, passing operators that take no arguments, e.g. <code>dagStratify().id(() =&gt; &quot;&quot;)</code> will cause typescript to infer the data as <code>undefined</code>, which will then restrict the overall data-type to never in most circumstances.
If you encounter typescript errors saying types can&#39;t be assigned to <code>never</code> check that the appropraite types are being inferred from custom operators and accessors.</li>
</ul>

<a href="#experimental-es6-imports" id="experimental-es6-imports" style="color: inherit; text-decoration: none;">
  <h2>Experimental ES6 Imports</h2>
</a>
<p>As of version 0.7, the full typescript build is released in the <code>dist</code> folder. That means in addition to importing from the bundled es6 module that was available before, you should be able to import arbitrary nested modules from <code>d3-dag/dist/...</code>. There may be issues with doing this, but it is at least an option. If people report success importing once private members from this more structured interface it may become stable.</p>

<a href="#updating" id="updating" style="color: inherit; text-decoration: none;">
  <h2>Updating</h2>
</a>
<p>For information about changes between releases see the <a href="CHANGELOG.md"><code>changelog</code></a>.</p>

<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h2>Contributing</h2>
</a>
<p>Contributions, issues, and PRs are all welcome!</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/dag.html">dag</a></li><li class=" tsd-kind-module"><a href="modules/dag_create.html">dag/create</a></li><li class=" tsd-kind-module"><a href="modules/dag_utils.html">dag/utils</a></li><li class=" tsd-kind-module"><a href="modules/grid.html">grid</a></li><li class=" tsd-kind-module"><a href="modules/grid_lane.html">grid/lane</a></li><li class=" tsd-kind-module"><a href="modules/grid_lane_greedy.html">grid/lane/greedy</a></li><li class=" tsd-kind-module"><a href="modules/grid_lane_opt.html">grid/lane/opt</a></li><li class=" tsd-kind-module"><a href="modules/index.html">index</a></li><li class=" tsd-kind-module"><a href="modules/iters.html">iters</a></li><li class=" tsd-kind-module"><a href="modules/simplex.html">simplex</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama.html">sugiyama</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_coord.html">sugiyama/coord</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_coord_center.html">sugiyama/coord/center</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_coord_greedy.html">sugiyama/coord/greedy</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_coord_quad.html">sugiyama/coord/quad</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_coord_simplex.html">sugiyama/coord/simplex</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_coord_topological.html">sugiyama/coord/topological</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_decross.html">sugiyama/decross</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_decross_dfs.html">sugiyama/decross/dfs</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_decross_opt.html">sugiyama/decross/opt</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_decross_two_layer.html">sugiyama/decross/two-<wbr/>layer</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_layering.html">sugiyama/layering</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_layering_coffman_graham.html">sugiyama/layering/coffman-<wbr/>graham</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_layering_longest_path.html">sugiyama/layering/longest-<wbr/>path</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_layering_simplex.html">sugiyama/layering/simplex</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_layering_topological.html">sugiyama/layering/topological</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_twolayer.html">sugiyama/twolayer</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_twolayer_agg.html">sugiyama/twolayer/agg</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_twolayer_greedy.html">sugiyama/twolayer/greedy</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_twolayer_opt.html">sugiyama/twolayer/opt</a></li><li class=" tsd-kind-module"><a href="modules/sugiyama_utils.html">sugiyama/utils</a></li><li class=" tsd-kind-module"><a href="modules/zherebko.html">zherebko</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>